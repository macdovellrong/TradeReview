# 项目需求文档 (Project Status)

## 1. 项目简介
本项目是一个K线回放复盘工具，支持多窗口、多周期K线同步回放，基于 Finplot 和 PyQt6 开发。

## 2. 核心功能
- [x] **数据处理**: 
    - [x] 导入CSV Tick数据并转存为高效的 Parquet 格式。
    - [x] 支持 UTC 到美东时间 (America/New_York) 的自动转换。
    - [x] 实现高性能 K 线合成引擎 (Resampling)。
- [x] **绘图与多窗口**:
    - [x] 支持最多 4 个子窗口，独立选择周期 (1m, 5m, 15m, 30m, 1h, 4h, 1D)。
    - [x] 灵活布局切换：网格 (2x2)、垂直堆叠、标签页 (Tabs)。
    - [x] X轴时间显示，支持拖拽与缩放。
    - [x] 图表缩放功能优化，当鼠标在轴上的时候，缩放当前轴，当鼠标在图表中的时候，缩放两个轴
- [x] **回放功能**:
    - [x] 全量加载模式与回放模式切换。
    - [x] 支持任意时间开始回放 (通过时间选择器)。
    - [x] 回放速度可调节 (1x - 1000x)。
    - [x] **进度条 (Progress Slider)**: 支持拖动快速跳转，播放时自动更新。
- [x] **指标系统**:
    - [x] 固定指标支持：EMA (20, 30, 40, 50, 60)，颜色：红、橙、黄、绿、蓝。
    - [x] 布林带 (20, 2)，颜色：白色。
    - [x] 使用原生 PyqtGraph 绘制，解决了与 Finplot 的冲突问题。
- [x] **交互优化**:
    - [x] 滚轮缩放：直接滚动缩放 X 轴，按住 **Ctrl** 滚动缩放 Y 轴。
    - [x] **Reset View**: 一键还原视图，自动对齐数据边界。
    - [x] 手动加载数据：支持通过文件对话框选择 Parquet 数据。
    - [x] **十字光标同步**: 多窗口间时间轴同步显示。

## 3. 技术栈
- 前端：Finplot, PyQt6, PyqtGraph
- 后端：Pandas, Numpy
- 存储：Parquet (pyarrow)

## 4. 目录结构
- `/ui`: 包含主窗口及图表组件代码。
- `/engine`: 核心数据处理与指标计算引擎。
- `/tools`: 数据转换与检查工具。
- `/data`: 存放 Parquet 及 CSV 数据 (已加入 .gitignore)。
- `run.py`: 项目入口。